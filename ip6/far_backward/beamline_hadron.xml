<?xml version="1.0" encoding="UTF-8"?>
<lccdd>

  <comment>
     Incident hadron beamline
     Implemented to allow overlap checks with the far backwards systems   
  </comment>  
  

  <detectors>

    <!-- Magnets -->
    <!-- Q1APR -->
    <detector name="Pipe_to_Q1APR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Hadron_Beampipe_End" end2="Q1APR_StartZ" xoff="Hadron_Beampipe_End*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>

    <detector name="Magnet_Q1APR" type="ip6_CylindricalDipoleMagnet" vis="RedVis">
      <placement  x="(Q1APR_StartX+Q1APR_EndX)/2" y="0" z="(Q1APR_StartZ+Q1APR_EndZ)/2" theta="Q1APR_Theta"/>
      <dimensions x="Q1APR_InnerRadius*4" y="Q1APR_InnerRadius*4" z="Q1APR_Length" r="2.0*Q1APR_InnerRadius"/>
      <apperture  x="Q1APR_InnerRadius*2" y="Q1APR_InnerRadius*2" r="Q1APR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Pipe_in_Q1APR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q1APR_StartZ" end2="Q1APR_EndZ" xoff="Q1APR_StartZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>


    <!-- Q1BPR -->
    <detector name="Pipe_Q1APR_to_Q1BPR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q1APR_EndZ" end2="Q1BPR_StartZ" xoff="Q1APR_EndZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>

    <detector name="Magnet_Q1BPR" type="ip6_CylindricalDipoleMagnet" vis="RedVis">
      <placement  x="(Q1BPR_StartX+Q1BPR_EndX)/2" y="0" z="(Q1BPR_StartZ+Q1BPR_EndZ)/2" theta="Q1APR_Theta"/>
      <dimensions x="Q1BPR_InnerRadius*4" y="Q1BPR_InnerRadius*4" z="Q1BPR_Length" r="2.0*Q1BPR_InnerRadius"/>
      <apperture  x="Q1BPR_InnerRadius*2" y="Q1BPR_InnerRadius*2" r="Q1BPR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Pipe_in_Q1BPR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q1BPR_StartZ" end2="Q1BPR_EndZ" xoff="Q1BPR_StartZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>


    <!-- Q2PR -->
    <detector name="Pipe_Q1BPR_to_Q2PR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q1BPR_EndZ" end2="Q2PR_StartZ" xoff="Q1BPR_EndZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>

    <detector name="Magnet_Q2PR" type="ip6_CylindricalDipoleMagnet" vis="RedVis">
      <placement  x="(Q2PR_StartX+Q2PR_EndX)/2" y="0" z="(Q2PR_StartZ+Q2PR_EndZ)/2" theta="Q1BPR_Theta"/>
      <dimensions x="Q2PR_InnerRadius*4" y="Q2PR_InnerRadius*4" z="Q2PR_Length" r="2.0*Q2PR_InnerRadius"/>
      <apperture  x="Q2PR_InnerRadius*2" y="Q2PR_InnerRadius*2" r="Q2PR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Pipe_in_Q2PR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q2PR_StartZ" end2="Q2PR_EndZ" xoff="Q2PR_StartZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>


    <!-- Q3PR -->
    <detector name="Pipe_Q2PR_to_Q3PR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q2PR_EndZ" end2="Q3PR_StartZ" xoff="Q2PR_EndZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>

    <detector name="Magnet_Q3PR" type="ip6_CylindricalDipoleMagnet" vis="RedVis">
      <placement  x="(Q3PR_StartX+Q3PR_EndX)/2" y="0" z="(Q3PR_StartZ+Q3PR_EndZ)/2" theta="Q2PR_Theta"/>
      <dimensions x="Q3PR_InnerRadius*4" y="Q3PR_InnerRadius*4" z="Q3PR_Length" r="2.0*Q3PR_InnerRadius"/>
      <apperture  x="Q3PR_InnerRadius*2" y="Q3PR_InnerRadius*2" r="Q3PR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Pipe_in_Q3PR" type="BackwardsBeamPipe">
      <Pipe wall_thickness="Hadron_Beampipe_Thickness" outerD1="Hadron_Beampipe_Rad" outerD2="Hadron_Beampipe_Rad"
        end1="Q3PR_StartZ" end2="Q3PR_EndZ" xoff="Q3PR_StartZ*sin(CrossingAngle)"/>
      <rotation x="0*rad"  y="CrossingAngle"   z="0*rad"/>
    </detector>


  </detectors>
</lccdd>
